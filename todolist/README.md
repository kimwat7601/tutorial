# TodoList
学習アプリ２．ToDoリストアプリ

ChatGPTから提案された課題は、下記の通り。
今回は課題だけではなく、プロジェクトの進め方のコツを聞いてみた。

---

プロジェクトを進める際は、**設計 → 実装 → 改善** の流れで進めるとスムーズです。  
**ToDoリストアプリ** を例に、具体的なステップを解説します！  

---

### **① 目的を明確にする**
まず、「このアプリで何をしたいのか？」を決めます。  
👉 **基本機能:**  
✅ タスクの追加・削除  
✅ タスクの完了/未完了の切り替え  
✅ ローカルストレージにデータを保存  

👉 **発展的な機能:**（あとで追加）  
✅ タスクの編集  
✅ タスクの並び替え  
✅ 期日やカテゴリーの追加  

---

### **② 設計（アプリの構成を考える）**
**1. データ設計（どんなデータを扱うか）**  
```typescript
type Todo = {
  id: number;
  text: string;
  completed: boolean;
};
```
- `id`: 一意のID（タスク識別用）
- `text`: タスクの内容
- `completed`: 完了フラグ（`true/false`）

**2. 画面設計（UI構成）**  
画面にどんな要素が必要かを考える。  
📌 **必要な要素:**  
✅ タスク入力欄（`<input>` + 追加ボタン）  
✅ タスク一覧（完了/未完了の区別）  
✅ 削除ボタン（タスクごとに）  

ワイヤーフレーム（簡単なレイアウト図）を書くと整理しやすい。  
```
--------------------------
[ タスク入力欄 ] (+ボタン)
--------------------------
[ ] 買い物に行く  (❌)
[✔] 読書をする  (❌)
--------------------------
```

---

### **③ 実装（最小限の機能から作る）**
いきなり全部作らず、**小さく動くもの** を作りながら進めるのがコツ。  
順番としては：
1️⃣ **タスクを追加する機能を作る**（まずは `console.log` で確認）  
2️⃣ **画面にタスクを表示する**（`ul` に追加）  
3️⃣ **削除機能を実装する**  
4️⃣ **完了/未完了の切り替えを実装**  
5️⃣ **ローカルストレージで保存**  

---

### **④ 改善・拡張（発展機能を追加）**
基本機能ができたら、リファクタリング（コード整理）や新機能追加を行う。  
✅ `TypeScript` を使って型を付ける  
✅ 並び替え機能を追加  
✅ デザインを整える（CSS, Tailwind CSS）  

---

### **⑤ まとめ（プロジェクトの進め方）**
💡 **プロジェクトを進めるコツ**  
✔ **いきなり全部作らず、小さい単位で動作確認しながら進める**  
✔ **最初はJavaScriptで作って、後からTypeScript化する**（型の適用に慣れる）  
✔ **バグが出たら`console.log`でデータの流れをチェック**  

---

ChatGPTのアドバイス通り、まずは最小限の機能を作ってみる。
2025/2/23現在、４まで完了
（実装までおおよそ8時間程度）

---

## 気づき
Todoリストは、データを管理する基本形のアプリ。
CMSなら新着情報、製品情報の追加、編集機能、
ECサイトなら、商品情報、顧客情報を扱うためのデータ管理は、
このToDoリストのように、どの用にデータを設計するかを応用してできるはず。

※顧客情報なら、
・顧客ID
・顧客名
・住所
・メールアドレス
・性別
etc...

上記を意識して、発展型の機能まで実装したい。

## 3/3 基本実装完了
ざっくりと動くところまで実装し、
ローカルストレージに保存できる（読み出せる）まで確認後、
関数を使って機能を細分化し、ChatGPTにコードレビューを依頼。

↓↓↓以下ChatGPTの評価↓↓↓

### **評価項目**
1. **可読性（10点満点）**
2. **保守性（10点満点）**
3. **パフォーマンス（10点満点）**
4. **エラーハンドリング（10点満点）**
5. **適切なデータ管理（10点満点）**

---

### **評価表**
| 項目 | 点数 | コメント |
|------|------|----------|
| **可読性** | 7 | 変数名や関数名は概ね適切だが、`elTodoCheck` や `elBtnDelete` など未使用の変数があり、混乱しやすい。コメントもある程度あるが、より明確な説明があると理解しやすくなる。 |
| **保守性** | 6 | `updateList()` のように一括更新する関数があるのは良いが、イベントリスナー内の処理がやや長くなっており、分割できる部分がある。また、`entryTodoDatas()` で直接配列を操作しているため、データの管理が分散している点が気になる。 |
| **パフォーマンス** | 6 | `updateList()` で全リストをクリアしてから再描画するため、大量データでは描画コストが増加する可能性がある。差分更新の仕組みを導入するとより最適化できる。 |
| **エラーハンドリング** | 5 | `JSON.parse()` に失敗する可能性があるが、その対策がない。また、ローカルストレージのデータが壊れていた場合のフォールバック処理がないため、エラーでアプリが停止するリスクがある。 |
| **適切なデータ管理** | 6 | ローカルストレージの管理はできているが、データの保存・取得のロジックが分散しているため、一元管理できる仕組みがあるとより良い。`lsDataSave()` にデータの取得部分も統合する形が望ましい。 |

---

### **総合評価：6.0 / 10**
基本機能は正しく動作し、可読性も一定レベルあるが、保守性やエラーハンドリング、パフォーマンスの最適化余地がある。以下の改善点を提案します。

---

### **改善点**
#### **1. 未使用の変数を削除**
`elTodoCheck` や `elBtnDelete` は関数内で定義・使用されるため、グローバルスコープに不要。

```js
let elTodoCheck = ''; // 不要
let elBtnDelete = ''; // 不要
```

#### **2. JSON.parse() のエラーハンドリング**
ローカルストレージのデータが破損していた場合の対策を追加。

```js
let todolistSaveData;
try {
    todolistSaveData = JSON.parse(localStorage.getItem('todolistData')) || { datas: [], currentId: 0 };
} catch (e) {
    todolistSaveData = { datas: [], currentId: 0 };
}
```

#### **3. データ管理を一元化**
データの取得・保存の関数を統合し、`lsDataSave()` で `objTodoListDatas` の取得も行うようにする。

```js
function getStoredData() {
    try {
        return JSON.parse(localStorage.getItem('todolistData')) || { datas: [], currentId: 0 };
    } catch (e) {
        return { datas: [], currentId: 0 };
    }
}

function lsDataSave(data) {
    const lsObj = {
        datas: data,
        currentId: idCounterNum
    };
    localStorage.setItem('todolistData', JSON.stringify(lsObj));
}
```

#### **4. `updateList()` の差分更新**
現在は全リストを削除→再描画しているが、新しいタスクの追加時のみ`appendChild()` で追加する方法を検討。

---

これらの改善を取り入れると、より保守性の高いコードになります！ 💪🚀

ChatGPTのアドバイスに従って、
より良く改善コードを書く。

途中バグだったり動かなかったりしても、
随時ChatGPTに教えてもらいながら、
コードの改善完了。

多分自分では思いつけなかったところは、
そのまま手を動かしてコードコピーしました。

## 以下課題

・発展型に挑戦する（カテゴリーわけ、登録済みTodoの内容を書き換えられるようにする、など）
・Typescriptへの置き換え、SPAの実装・置き換え

Gitのブランチを使って、擬似的に数人のプロジェクトをシミュレーションしながら行う予定